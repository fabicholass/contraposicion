<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encontrar a Luigi</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            position: relative;
            font-family: Arial, sans-serif;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .character {
            position: absolute;
            width: 50px;
            height: 50px;
            cursor: pointer;
        }

        #start-button {
            width: 100px;
            height: 50px;
            background-color: #fff;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <button id="start-button"></button>
    <audio id="background-audio" src="/media/find.wav" loop></audio>

    <script>
        const charactersContainer = document.body;
        const startButton = document.getElementById('start-button');
        const backgroundAudio = document.getElementById('background-audio');
        const characterImages = [
            'media/MARIO_WANTED.png',
            'media/WARIO_WANTED.png',
            'media/YOSHI_WANTED.png'
        ];

        let characters = []; // Almacena los personajes para manipular su velocidad
        let speedMultiplier = 1; // Multiplier de velocidad para los personajes
        let gameStarted = false;

        // Función para crear un personaje con movimiento
        function createCharacter(imageSrc, isLuigi = false) {
            const character = document.createElement('div');
            character.classList.add('character');

            const img = document.createElement('img');
            img.src = imageSrc;
            img.alt = "Character";

            character.appendChild(img);
            charactersContainer.appendChild(character);

            // Posición inicial aleatoria
            let x = Math.random() * (window.innerWidth - 50);
            let y = Math.random() * (window.innerHeight - 50);

            // Dirección inicial aleatoria con velocidad normal
            let dx = (Math.random() > 0.5 ? 1 : -1) * (Math.random() * 0.5 + 0.2);
            let dy = (Math.random() > 0.5 ? 1 : -1) * (Math.random() * 0.5 + 0.2);

            function move() {
                x += dx * speedMultiplier;  // Modificar velocidad con el multiplicador
                y += dy * speedMultiplier;

                // Rebotar en los bordes de la pantalla
                if (x <= 0 || x + 50 >= window.innerWidth) {
                    dx *= -1;
                }
                if (y <= 0 || y + 50 >= window.innerHeight) {
                    dy *= -1;
                }

                character.style.left = `${x}px`;
                character.style.top = `${y}px`;

                requestAnimationFrame(move);
            }

            move();

            // Si es Luigi, agregar el evento de clic para redirigir
            if (isLuigi) {
                character.addEventListener('click', () => {
                    window.location.href = 'https://youtu.be/dM-mfOuv5Ac';
                });
            }

            // Guardar el personaje en la lista
            characters.push({ element: character, dx, dy });
        }

        // Función para iniciar el juego
        function startGame() {
            if (gameStarted) return; // Evitar que inicie más de una vez
            gameStarted = true;

            startButton.style.display = 'none';
            fadeInAudio();

            // Crear a Luigi
            createCharacter('media/LUIGI_WANTED.png', true);

            // Crear personajes adicionales
            function generateCharacters(quantity) {
                for (let i = 0; i < quantity; i++) {
                    const randomImage = characterImages[Math.floor(Math.random() * characterImages.length)];
                    createCharacter(randomImage);
                }
            }

            // Generar 10 personajes adicionales
            generateCharacters(500);

            // Iniciar el ciclo de velocidad
            toggleSpeed();
        }

        // Función para hacer un fade in del audio en 3 segundos
        function fadeInAudio() {
            backgroundAudio.volume = 0;
            backgroundAudio.play();
            let volume = 0;
            const fadeInInterval = setInterval(() => {
                if (volume < 1) {
                    volume += 0.01;
                    backgroundAudio.volume = volume;
                } else {
                    clearInterval(fadeInInterval);
                }
            }, 30); // Ajuste para lograr un fade in de 3 segundos (0.01 * 30ms = 3 segundos)
        }

        // Función para alternar la velocidad cada 16 segundos
        function toggleSpeed() {
            setInterval(() => {
                speedMultiplier = (speedMultiplier === 1) ? 10 : 1;
            }, 16000); // Cada 16 segundos
        }

        startButton.addEventListener('click', startGame);
    </script>
</body>
</html>
